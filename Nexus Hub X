local Rayfield = loadstring(game:HttpGet("https://sirius.menu/rayfield"))()

local Window = Rayfield:CreateWindow({
    Name = "Nexus Hub v1.2.7 â˜„ï¸",
    KeySystem = true,
    KeySettings = {
        FileName = "HydraKey",
        SaveKey = false,
        Key = "NHX"
    },
    Theme = "Amethyst"
})

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Lighting = game:GetService("Lighting")
local LocalPlayer = Players.LocalPlayer

local playerEnabled = false
local noclipEnabled = false
local infJumpEnabled = false
local performanceEnabled = false
local infStaminaEnabled = false

local cframeSpeed = 1
local gravity = 196.2

local storedEffects = {}
local staminaConn = nil
local staminaModule = nil
local noclipConn = nil

local spawnedBlocks = {}
local MAX_BLOCKS = 10

local PlayerTab = Window:CreateTab("Player", 110476445363181)

PlayerTab:CreateToggle({
    Name = "Enable Player",
    CurrentValue = false,
    Callback = function(v) playerEnabled = v end
})

PlayerTab:CreateSlider({
    Name = "CFrame Speed",
    Range = {1,170},
    Increment = 1,
    CurrentValue = 1,
    Callback = function(v) cframeSpeed = v end
})

PlayerTab:CreateSlider({
    Name = "Gravity",
    Range = {0,500},
    Increment = 1,
    CurrentValue = 196,
    Callback = function(v)
        gravity = v
        if playerEnabled then workspace.Gravity = v end
    end
})

PlayerTab:CreateToggle({
    Name = "Noclip (Bypass)",
    CurrentValue = false,
    Callback = function(v)
        noclipEnabled = v
        if noclipConn then noclipConn:Disconnect() noclipConn = nil end
        if v then
            noclipConn = RunService.Stepped:Connect(function()
                local char = LocalPlayer.Character
                if char then
                    for _,p in ipairs(char:GetDescendants()) do
                        if p:IsA("BasePart") then p.CanCollide = false end
                    end
                end
            end)
        end
    end
})

PlayerTab:CreateToggle({
    Name = "InfJump",
    CurrentValue = false,
    Callback = function(v) infJumpEnabled = v end
})

local ForsakenTab = Window:CreateTab("Forsaken ðŸ“‘", 4483362458)

ForsakenTab:CreateToggle({
    Name = "Inf Stamina",
    CurrentValue = false,
    Callback = function(v)
        infStaminaEnabled = v
        if staminaConn then staminaConn:Disconnect() staminaConn = nil end
        if v then
            pcall(function()
                local rs = cloneref(game:GetService("ReplicatedStorage"))
                local sprintModule = rs:WaitForChild("Systems")
                    :WaitForChild("Character")
                    :WaitForChild("Game")
                    :WaitForChild("Sprinting")
                staminaModule = require(sprintModule)
                staminaConn = RunService.Heartbeat:Connect(function()
                    if infStaminaEnabled and staminaModule then
                        staminaModule.Stamina = 750
                    end
                end)
            end)
        end
    end
})

local InGameTab = Window:CreateTab("In-game", 4483362458)

InGameTab:CreateToggle({
    Name = "Performance Mode",
    CurrentValue = false,
    Callback = function(v)
        performanceEnabled = v
        pcall(function()
            if v then
                storedEffects = {}
                for _,obj in ipairs(workspace:GetDescendants()) do
                    if obj:IsA("ParticleEmitter") or obj:IsA("Trail") or obj:IsA("Beam") then
                        storedEffects[obj] = obj.Enabled
                        obj.Enabled = false
                    end
                end
                for _,fx in ipairs(Lighting:GetChildren()) do
                    if fx:IsA("BloomEffect")
                    or fx:IsA("BlurEffect")
                    or fx:IsA("SunRaysEffect")
                    or fx:IsA("ColorCorrectionEffect")
                    or fx:IsA("DepthOfFieldEffect") then
                        storedEffects[fx] = fx.Enabled
                        fx.Enabled = false
                    end
                end
            else
                for obj,state in pairs(storedEffects) do
                    if obj and obj.Parent then obj.Enabled = state end
                end
                storedEffects = {}
            end
        end)
    end
})

InGameTab:CreateButton({
    Name = "Spawn Block",
    Callback = function()
        if #spawnedBlocks >= MAX_BLOCKS then return end

        local char = LocalPlayer.Character
        local hrp = char and char:FindFirstChild("HumanoidRootPart")
        if not hrp then return end

        local part = Instance.new("Part")
        part.Size = Vector3.new(6, 2, 6)
        part.Color = Color3.fromRGB(120, 190, 255)
        part.Transparency = 0.5
        part.Anchored = false
        part.CanCollide = true
        part.CFrame = hrp.CFrame * CFrame.new(0, -3, -8)
        part.Parent = workspace

        pcall(function()
            part.CornerRadius = UDim.new(0, 12)
        end)

        local drag = Instance.new("DragDetector")
        drag.Parent = part

        table.insert(spawnedBlocks, part)
    end
})

InGameTab:CreateButton({
    Name = "Delete Blocks",
    Callback = function()
        for _,b in ipairs(spawnedBlocks) do
            if b and b.Parent then b:Destroy() end
        end
        table.clear(spawnedBlocks)
    end
})

local CreditsTab = Window:CreateTab("Credits ðŸ’»", 4483362458)

CreditsTab:CreateParagraph({Title="Version",Content="v1.2.7"})
CreditsTab:CreateParagraph({Title="Creators",Content="Hydra\nNexus Hub Team"})
CreditsTab:CreateParagraph({Title="Changelog",Content="- Spawn Block\n- Delete Blocks\n- Noclip bypass\n- Stability improvements"})

UserInputService.JumpRequest:Connect(function()
    if infJumpEnabled and LocalPlayer.Character then
        local hum = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
        if hum then hum:ChangeState(Enum.HumanoidStateType.Jumping) end
    end
end)

RunService.Heartbeat:Connect(function()
    if not playerEnabled then return end
    local char = LocalPlayer.Character
    local hrp = char and char:FindFirstChild("HumanoidRootPart")
    local hum = char and char:FindFirstChildOfClass("Humanoid")
    if not hrp or not hum then return end
    workspace.Gravity = gravity
    local moveDir = hum.MoveDirection
    if moveDir.Magnitude > 0 then
        hrp.CFrame = hrp.CFrame + (moveDir * (cframeSpeed * 0.08))
    end
end)
