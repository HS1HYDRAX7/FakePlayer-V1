local Rayfield = loadstring(game:HttpGet("https://sirius.menu/rayfield"))()

local Window = Rayfield:CreateWindow({
    Name = "Nexus Hub v1.2.7 â˜„ï¸",
    KeySystem = true,
    KeySettings = {
        FileName = "HydraKey",
        SaveKey = false,
        Key = "NHX"
    },
    Theme = "Amethyst"
})

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Lighting = game:GetService("Lighting")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LocalPlayer = Players.LocalPlayer

local playerEnabled = false
local noclipEnabled = false
local infJumpEnabled = false
local infStaminaEnabled = false
local noCooldownEnabled = false

local cframeSpeed = 1
local gravity = 196.2

local storedEffects = {}
local staminaConn = nil
local staminaModule = nil
local cooldownConn = nil
local cachedCooldowns = {}

local PlayerTab = Window:CreateTab("Player", 110476445363181)

PlayerTab:CreateToggle({Name="Enable Player",CurrentValue=false,Callback=function(v)playerEnabled=v end})
PlayerTab:CreateSlider({Name="CFrame Speed",Range={1,500},Increment=1,CurrentValue=1,Callback=function(v)cframeSpeed=v end})
PlayerTab:CreateSlider({Name="Gravity",Range={0,500},Increment=1,CurrentValue=196,Callback=function(v)gravity=v if playerEnabled then workspace.Gravity=v end end})
PlayerTab:CreateToggle({Name="Enable Noclip",CurrentValue=false,Callback=function(v)noclipEnabled=v end})
PlayerTab:CreateToggle({Name="Enable InfJump",CurrentValue=false,Callback=function(v)infJumpEnabled=v end})

local ForsakenTab = Window:CreateTab("Forsaken ðŸ“‘", 4483362458)

ForsakenTab:CreateToggle({
    Name = "Inf Stamina",
    CurrentValue = false,
    Callback = function(v)
        infStaminaEnabled = v
        if staminaConn then staminaConn:Disconnect() staminaConn=nil end
        if v then
            pcall(function()
                local rs = cloneref(ReplicatedStorage)
                local sprint = rs.Systems.Character.Game.Sprinting
                staminaModule = require(sprint)
                staminaConn = RunService.Heartbeat:Connect(function()
                    staminaModule.Stamina = 750
                end)
            end)
        end
    end
})

local function cacheCooldowns()
    cachedCooldowns = {}
    local function scan(root)
        for _,obj in ipairs(root:GetDescendants()) do
            if obj:IsA("NumberValue") or obj:IsA("IntValue") then
                if string.find(string.lower(obj.Name),"cool") then
                    table.insert(cachedCooldowns,obj)
                end
            end
        end
    end
    scan(ReplicatedStorage)
    local char = LocalPlayer.Character
    if char then scan(char) end
end

ForsakenTab:CreateToggle({
    Name = "No Cooldown",
    CurrentValue = false,
    Callback = function(v)
        noCooldownEnabled = v
        if cooldownConn then cooldownConn:Disconnect() cooldownConn=nil end
        if v then
            cacheCooldowns()
            cooldownConn = task.spawn(function()
                while noCooldownEnabled do
                    for _,v in ipairs(cachedCooldowns) do
                        if v and v.Parent then v.Value = 0 end
                    end
                    task.wait(0.4)
                end
            end)
        end
    end
})

local InGameTab = Window:CreateTab("In-game", 4483362458)

InGameTab:CreateToggle({
    Name = "Performance Mode",
    CurrentValue = false,
    Callback = function(v)
        pcall(function()
            if v then
                storedEffects={}
                for _,o in ipairs(workspace:GetDescendants()) do
                    if o:IsA("ParticleEmitter") or o:IsA("Trail") or o:IsA("Beam") then
                        storedEffects[o]=o.Enabled
                        o.Enabled=false
                    end
                end
                for _,fx in ipairs(Lighting:GetChildren()) do
                    if fx:IsA("BloomEffect") or fx:IsA("BlurEffect")
                    or fx:IsA("SunRaysEffect") or fx:IsA("ColorCorrectionEffect")
                    or fx:IsA("DepthOfFieldEffect") then
                        storedEffects[fx]=fx.Enabled
                        fx.Enabled=false
                    end
                end
            else
                for o,s in pairs(storedEffects) do
                    if o and o.Parent then o.Enabled=s end
                end
                storedEffects={}
            end
        end)
    end
})

local CreditsTab = Window:CreateTab("Credits ðŸ’»", 4483362458)
CreditsTab:CreateParagraph({Title="Version",Content="v1.2.7"})
CreditsTab:CreateParagraph({Title="Creators",Content="Hydra\nNexus Hub Team"})
CreditsTab:CreateParagraph({Title="Changelog",Content="- Forsaken Inf Stamina\n- Forsaken No Cooldown (optimized)\n- Stability fixes"})

RunService.Stepped:Connect(function()
    if noclipEnabled then
        local c=LocalPlayer.Character
        if c then
            for _,p in ipairs(c:GetDescendants()) do
                if p:IsA("BasePart") then p.CanCollide=false end
            end
        end
    end
end)

UserInputService.JumpRequest:Connect(function()
    if infJumpEnabled then
        local h=LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
        if h then h:ChangeState(Enum.HumanoidStateType.Jumping) end
    end
end)

RunService.Heartbeat:Connect(function()
    if not playerEnabled then return end
    local c=LocalPlayer.Character
    local hrp=c and c:FindFirstChild("HumanoidRootPart")
    local h=c and c:FindFirstChildOfClass("Humanoid")
    if not hrp or not h then return end
    workspace.Gravity=gravity
    local d=h.MoveDirection
    if d.Magnitude>0 then
        hrp.CFrame=hrp.CFrame+(d*(cframeSpeed*0.1))
    end
end)
