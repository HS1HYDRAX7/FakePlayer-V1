local Rayfield = loadstring(game:HttpGet("https://sirius.menu/rayfield"))()

local Window = Rayfield:CreateWindow({
    Name = "Nexus Hub v1.3.9 â˜„ï¸",
    KeySystem = true,
    KeySettings = {
        FileName = "HydraKey",
        SaveKey = false,
        Key = "NHX"
    },
    Theme = "Amethyst"
})

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Lighting = game:GetService("Lighting")
local LocalPlayer = Players.LocalPlayer

local playerEnabled = false
local noclipEnabled = false
local infJumpEnabled = false
local infStaminaEnabled = false
local invisibleEnabled = false

local cframeSpeed = 1
local gravity = 196.2

local storedEffects = {}
local staminaConn
local staminaModule
local noclipConn
local noclipParts = {}
local invisData = {}

local PlayerTab = Window:CreateTab("Player",110476445363181)

PlayerTab:CreateToggle({Name="Enable Player",CurrentValue=false,Callback=function(v)playerEnabled=v end})

PlayerTab:CreateSlider({
    Name="CFrame Speed",
    Range={1,170},
    Increment=1,
    CurrentValue=1,
    Callback=function(v)cframeSpeed=v end
})

PlayerTab:CreateSlider({
    Name="Gravity",
    Range={0,500},
    Increment=1,
    CurrentValue=196,
    Callback=function(v)
        gravity=v
        if playerEnabled then workspace.Gravity=v end
    end
})

PlayerTab:CreateToggle({
    Name="Noclip (Bypass)",
    CurrentValue=false,
    Callback=function(v)
        noclipEnabled=v

        if noclipConn then
            noclipConn:Disconnect()
            noclipConn=nil
        end

        if v then
            noclipParts={}
            noclipConn=RunService.Stepped:Connect(function()
                local char=LocalPlayer.Character
                if not char then return end
                for _,p in ipairs(char:GetDescendants()) do
                    if p:IsA("BasePart") then
                        if noclipParts[p]==nil then
                            noclipParts[p]=p.CanCollide
                        end
                        p.CanCollide=false
                    end
                end
            end)
        else
            for p,state in pairs(noclipParts) do
                if p and p.Parent then
                    p.CanCollide=state
                end
            end
            noclipParts={}
        end
    end
})

PlayerTab:CreateToggle({
    Name="InfJump",
    CurrentValue=false,
    Callback=function(v)infJumpEnabled=v end
})

PlayerTab:CreateToggle({
    Name="Invisible",
    CurrentValue=false,
    Callback=function(v)
        invisibleEnabled=v
        local char=LocalPlayer.Character
        if not char then return end

        if v then
            invisData={}
            for _,obj in ipairs(char:GetDescendants()) do
                if obj:IsA("BasePart") then
                    invisData[obj]={obj.Transparency,obj.LocalTransparencyModifier,obj.CanQuery}
                    obj.Transparency=1
                    obj.LocalTransparencyModifier=1
                    obj.CanQuery=false
                elseif obj:IsA("Decal") then
                    invisData[obj]={obj.Transparency}
                    obj.Transparency=1
                end
            end
            local hum=char:FindFirstChildOfClass("Humanoid")
            if hum then
                invisData[hum]={hum.NameDisplayDistance}
                hum.NameDisplayDistance=0
            end
        else
            for obj,data in pairs(invisData) do
                if obj and obj.Parent then
                    if obj:IsA("BasePart") then
                        obj.Transparency=data[1]
                        obj.LocalTransparencyModifier=data[2]
                        obj.CanQuery=data[3]
                    elseif obj:IsA("Decal") then
                        obj.Transparency=data[1]
                    elseif obj:IsA("Humanoid") then
                        obj.NameDisplayDistance=data[1]
                    end
                end
            end
            invisData={}
        end
    end
})

local ForsakenTab = Window:CreateTab("Forsaken ðŸ“‘",4483362458)

ForsakenTab:CreateToggle({
    Name="Inf Stamina",
    CurrentValue=false,
    Callback=function(v)
        infStaminaEnabled=v
        if staminaConn then staminaConn:Disconnect() staminaConn=nil end
        if v then
            local rs=cloneref(game:GetService("ReplicatedStorage"))
            local sprint=rs:WaitForChild("Systems"):WaitForChild("Character"):WaitForChild("Game"):WaitForChild("Sprinting")
            staminaModule=require(sprint)
            staminaConn=RunService.Heartbeat:Connect(function()
                if infStaminaEnabled and staminaModule then
                    staminaModule.Stamina=750
                end
            end)
        end
    end
})

local InGameTab = Window:CreateTab("In-game",4483362458)

InGameTab:CreateToggle({
    Name="Performance Mode",
    CurrentValue=false,
    Callback=function(v)
        if v then
            storedEffects={}
            for _,o in ipairs(workspace:GetDescendants()) do
                if o:IsA("ParticleEmitter") or o:IsA("Trail") or o:IsA("Beam") then
                    storedEffects[o]=o.Enabled
                    o.Enabled=false
                end
            end
            for _,fx in ipairs(Lighting:GetChildren()) do
                if fx:IsA("BloomEffect") or fx:IsA("BlurEffect") or fx:IsA("SunRaysEffect")
                or fx:IsA("ColorCorrectionEffect") or fx:IsA("DepthOfFieldEffect") then
                    storedEffects[fx]=fx.Enabled
                    fx.Enabled=false
                end
            end
        else
            for o,s in pairs(storedEffects) do
                if o and o.Parent then o.Enabled=s end
            end
            storedEffects={}
        end
    end
})

local InfoTab = Window:CreateTab("Information ðŸ’¾",4483362458)

local clockParagraph = InfoTab:CreateParagraph({
    Title="Clock",
    Content="--:--:--"
})

task.spawn(function()
    while task.wait(1) do
        local t=os.date("*t")
        clockParagraph:Set({
            Title="Clock",
            Content=string.format("%02d:%02d:%02d",t.hour,t.min,t.sec)
        })
    end
end)

InfoTab:CreateParagraph({Title="Creators",Content="Hydra\nNexus Hub Team"})
InfoTab:CreateParagraph({Title="Changelog",Content="- Stability\n- Forsaken Support\n- Noclip Fix\n- Invisibility"})

UserInputService.JumpRequest:Connect(function()
    if infJumpEnabled and LocalPlayer.Character then
        local hum=LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
        if hum then hum:ChangeState(Enum.HumanoidStateType.Jumping) end
    end
end)

RunService.Heartbeat:Connect(function()
    if not playerEnabled then return end
    local char=LocalPlayer.Character
    local hrp=char and char:FindFirstChild("HumanoidRootPart")
    local hum=char and char:FindFirstChildOfClass("Humanoid")
    if not hrp or not hum then return end
    workspace.Gravity=gravity
    local dir=hum.MoveDirection
    if dir.Magnitude>0 then
        hrp.CFrame=hrp.CFrame+(dir*(cframeSpeed*0.08))
    end
end)
