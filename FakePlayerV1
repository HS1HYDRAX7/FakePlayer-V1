local FakeName = "Roblox"
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()

-- Buscar UserId
local userId = Players:GetUserIdFromNameAsync(FakeName)

-- Criar o modelo fake
local fake = Players:CreateHumanoidModelFromUserId(userId)
fake.Name = FakeName
fake.Parent = workspace
fake:MoveTo(character.PrimaryPart.Position + Vector3.new(3, 0, 0))

local humanoid = fake:FindFirstChildOfClass("Humanoid")
humanoid.WalkSpeed = 40
humanoid.JumpPower = 0

-- ====== ANIMAÇÃO ======
local animator = humanoid:FindFirstChild("Animator") or Instance.new("Animator", humanoid)
local walkAnim = Instance.new("Animation")
walkAnim.AnimationId = "rbxassetid://507777826"
local walkTrack = animator:LoadAnimation(walkAnim)
walkTrack.Priority = Enum.AnimationPriority.Movement

-- Suavização
local function smoothMove(current, target, alpha)
	return current + (target - current) * alpha
end

-- ====== SISTEMA SUAVE DE SEGUIR ======
RunService.Heartbeat:Connect(function(dt)
	if not character or not character.PrimaryPart then return end

	local myPos = character.PrimaryPart.Position
	local fakePos = fake.PrimaryPart.Position
	local distance = (myPos - fakePos).Magnitude

	-- Olhar para você
	fake:SetPrimaryPartCFrame(CFrame.new(
		fakePos,
		Vector3.new(myPos.X, fakePos.Y, myPos.Z)
	))

	-- Parar perto
	if distance <= 5 then
		if walkTrack.IsPlaying then walkTrack:Stop() end
		return
	end

	-- Calcular direção
	local direction = (myPos - fakePos).Unit

	-- VELOCIDADE SUAVE (diminuindo quando você anda devagar)
	local speed = math.clamp(distance * 2, 6, 40)

	-- Movimento suavizado
	local newPos = smoothMove(fakePos, fakePos + direction * speed * dt, 0.25)

	fake:MoveTo(newPos)

	-- Ativar animação se estiver andando
	if not walkTrack.IsPlaying then
		walkTrack:Play()
	end
end)
