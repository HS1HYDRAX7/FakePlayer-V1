local Luna = loadstring(game:HttpGet(
    "https://raw.githubusercontent.com/Nebula-Softworks/Luna-Interface-Suite/main/source.lua"
))()

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local workspace = game:GetService("Workspace")
local LocalPlayer = Players.LocalPlayer
local FONT = Font.new("rbxassetid://12187370928")

local Window = Luna:CreateWindow({
	Name = "Nexus Hub v2.1.0 ‚òÑÔ∏è",
	Subtitle = "by Hydra",
	LoadingEnabled = true,
	LoadingTitle = "Nexus Hub V2 ‚òÑÔ∏è",
	LoadingSubtitle = "Loading systems...",
	ConfigSettings = { RootFolder = nil, ConfigFolder = "NexusHub" }
})

local PlayerTab = Window:CreateTab({ Name="Player", Icon="person", ImageSource="Material", ShowTitle=true })
local ForsakenTab = Window:CreateTab({ Name="Forsaken üìë", Icon="description", ImageSource="Material", ShowTitle=true })
local OthersTab = Window:CreateTab({ Name="Others ‚ú®", Icon="sports_esports", ImageSource="Material", ShowTitle=true })
local InfoTab = Window:CreateTab({ Name="Information", Icon="info", ImageSource="Material", ShowTitle=true })
local ItemsTab = Window:CreateTab({ Name="ESP Items", Icon="inventory", ImageSource="Material", ShowTitle=true })

local ESPFolder = workspace:FindFirstChild("ESP_Items") or Instance.new("Folder", workspace)
ESPFolder.Name = "ESP_Items"

local ESPSettings = { items = {}, conns = {}, enabled = true }

local function Clear(tbl)
	for _,v in pairs(tbl) do
		if typeof(v) == "Instance" then v:Destroy() end
		if typeof(v) == "RBXScriptConnection" then v:Disconnect() end
	end
	table.clear(tbl)
end

local function AddItemESP(item)
	local root = item:FindFirstChild("ItemRoot")
	if not (root and root:IsA("BasePart")) then return end

	local highlight = Instance.new("Highlight")
	highlight.Name = "ESPHighlight"
	highlight.Adornee = root
	highlight.FillColor = Color3.fromRGB(100, 200, 255)
	highlight.OutlineColor = Color3.fromRGB(100, 200, 255)
	highlight.FillTransparency = 0.5
	highlight.Parent = ESPFolder

	local bb = Instance.new("BillboardGui")
	bb.Name = "ESPName"
	bb.Adornee = root
	bb.Size = UDim2.fromOffset(120, 20)
	bb.StudsOffset = Vector3.new(0, root.Size.Y + 0.5, 0)
	bb.AlwaysOnTop = true
	bb.Parent = ESPFolder

	local tl = Instance.new("TextLabel", bb)
	tl.Size = UDim2.new(1,0,1,0)
	tl.BackgroundTransparency = 1
	tl.FontFace = FONT
	tl.TextScaled = true
	tl.TextColor3 = Color3.fromRGB(100,200,255)
	tl.TextStrokeTransparency = 0.3
	tl.Text = item.Name

	local conn
	conn = RunService.RenderStepped:Connect(function()
		local on = ESPSettings.enabled and item:IsDescendantOf(workspace)
		highlight.Visible = on
		tl.Visible = on
		if not on then
			highlight:Destroy()
			bb:Destroy()
			if conn then conn:Disconnect() conn=nil end
		end
	end)

	table.insert(ESPSettings.items, highlight)
	table.insert(ESPSettings.items, bb)
	table.insert(ESPSettings.conns, conn)
end

local function UpdateItems()
	Clear(ESPSettings.items)
	Clear(ESPSettings.conns)
	for _,it in ipairs(workspace:GetChildren()) do
		if it:IsA("Tool") then
			AddItemESP(it)
		end
	end
end

workspace.ChildAdded:Connect(function(c)
	if c:IsA("Tool") then
		AddItemESP(c)
	end
end)

ItemsTab:CreateToggle({
	Name="ESP Items",
	CurrentValue=true,
	Callback=function(v)
		ESPSettings.enabled=v
		if v then UpdateItems() else Clear(ESPSettings.items) Clear(ESPSettings.conns) end
	end
})

UpdateItems()
