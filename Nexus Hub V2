local Luna = loadstring(game:HttpGet("https://raw.githubusercontent.com/Nebula-Softworks/Luna-Interface-Suite/main/source.lua"))()

local Window = Luna:CreateWindow({
    Name = "Nexus Hub v2.0.6 â˜„ï¸",
    Subtitle = "by Hydra",
    LoadingEnabled = true,
    LoadingTitle = "Nexus Hub V2 â˜„ï¸",
    LoadingSubtitle = "Loading systems...",
    ConfigSettings = {
        RootFolder = nil,
        ConfigFolder = "NexusHub"
    }
})

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Lighting = game:GetService("Lighting")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LocalPlayer = Players.LocalPlayer

local playerEnabled = false
local noclipEnabled = false
local infJumpEnabled = false
local infStaminaEnabled = false
local autoGenEnabled = false
local autoGenSpeed = 5
local espEnabled = false
local autoBlockEnabled = false

local cframeSpeed = 1
local gravity = 196.2

local storedEffects = {}
local staminaConn
local staminaModule
local noclipConn
local originalCollisions = {}
local generatorObjects = {}
local espHighlights = {}

local function applyNoclip(character)
	if noclipConn then
		noclipConn:Disconnect()
		noclipConn = nil
	end
	if not character then return end
	originalCollisions = {}
	for _, part in ipairs(character:GetDescendants()) do
		if part:IsA("BasePart") then
			originalCollisions[part] = part.CanCollide
			part.CanCollide = false
		end
	end
	noclipConn = RunService.Stepped:Connect(function()
		if not noclipEnabled then return end
		if not character or not character.Parent then return end
		for _, part in ipairs(character:GetDescendants()) do
			if part:IsA("BasePart") then
				part.CanCollide = false
			end
		end
	end)
end

local function removeNoclip()
	if noclipConn then
		noclipConn:Disconnect()
		noclipConn = nil
	end
	for part, state in pairs(originalCollisions) do
		if part and part.Parent then
			part.CanCollide = state
		end
	end
	originalCollisions = {}
end

LocalPlayer.CharacterAdded:Connect(function(character)
	if noclipEnabled then
		task.wait(0.2)
		applyNoclip(character)
	end
end)

local PlayerTab = Window:CreateTab({Name = "Player", Icon = "person", ImageSource = "Material", ShowTitle = true})
PlayerTab:CreateToggle({Name = "Enable", CurrentValue = false, Callback = function(v) playerEnabled = v end})
PlayerTab:CreateSlider({Name = "CFrame Speed", Range = {1,70}, Increment = 1, CurrentValue = 1, Callback = function(v) cframeSpeed = v end})
PlayerTab:CreateSlider({Name = "Gravity", Range = {0,300}, Increment = 1, CurrentValue = 196, Callback = function(v) gravity = v if playerEnabled then workspace.Gravity = v end end})
PlayerTab:CreateToggle({Name = "Noclip", CurrentValue = false, Callback = function(v) noclipEnabled = v if v then applyNoclip(LocalPlayer.Character) else removeNoclip() end end})
PlayerTab:CreateToggle({Name = "Infinite Jump", CurrentValue = false, Callback = function(v) infJumpEnabled = v end})

local ForsakenTab = Window:CreateTab({Name = "Forsaken ðŸ“‘", Icon = "description", ImageSource = "Material", ShowTitle = true})
ForsakenTab:CreateToggle({Name = "Infinite Stamina", CurrentValue = false, Callback = function(v)
	infStaminaEnabled = v
	if staminaConn then staminaConn:Disconnect() staminaConn = nil end
	if v then
		local sprintModule = require(ReplicatedStorage:WaitForChild("Systems"):WaitForChild("Character"):WaitForChild("Game"):WaitForChild("Sprinting"))
		staminaModule = sprintModule
		staminaConn = RunService.Heartbeat:Connect(function() if infStaminaEnabled then staminaModule.Stamina = 750 end end)
	end
end})
ForsakenTab:CreateToggle({Name = "Auto Generator", CurrentValue = false, Callback = function(v) autoGenEnabled = v end})
ForsakenTab:CreateSlider({Name = "Generator Speed", Range = {1,10}, Increment = 1, CurrentValue = 5, Callback = function(v) autoGenSpeed = v end})

local OthersTab = Window:CreateTab({Name = "Others âœ¨", Icon = "sports_esports", ImageSource = "Material", ShowTitle = true})
OthersTab:CreateToggle({Name = "Performance Mode", CurrentValue = false, Callback = function(v)
	if v then
		storedEffects = {}
		for _, obj in ipairs(workspace:GetDescendants()) do
			if obj:IsA("ParticleEmitter") or obj:IsA("Trail") or obj:IsA("Beam") then storedEffects[obj] = obj.Enabled obj.Enabled = false end
		end
		for _, fx in ipairs(Lighting:GetChildren()) do
			if fx:IsA("BloomEffect") or fx:IsA("BlurEffect") or fx:IsA("SunRaysEffect") or fx:IsA("ColorCorrectionEffect") or fx:IsA("DepthOfFieldEffect") then storedEffects[fx] = fx.Enabled fx.Enabled = false end
		end
	else
		for obj, state in pairs(storedEffects) do if obj and obj.Parent then obj.Enabled = state end end
		storedEffects = {}
	end
end})

local InfoTab = Window:CreateTab({Name = "Information", Icon = "info", ImageSource = "Material", ShowTitle = true})
local clockLabel = InfoTab:CreateLabel({Text = "Clock: --:--:--", Style = 1})
task.spawn(function() while task.wait(1) do clockLabel:Set("Clock: "..os.date("%H:%M:%S")) end end)
InfoTab:CreateParagraph({Title = "Creators", Text = "Hydra (Owner)\nLincoln(My girlfriend)"})
InfoTab:CreateParagraph({Title = "Changelog", Text = "- Stability\n- Forsaken Support\n- Noclip Respawn Fix"})

UserInputService.JumpRequest:Connect(function()
	if infJumpEnabled and LocalPlayer.Character then
		local humanoid = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
		if humanoid then humanoid:ChangeState(Enum.HumanoidStateType.Jumping) end
	end
end)

RunService.Heartbeat:Connect(function()
	if not playerEnabled then return end
	local character = LocalPlayer.Character
	local hrp = character and character:FindFirstChild("HumanoidRootPart")
	local humanoid = character and character:FindFirstChildOfClass("Humanoid")
	if not hrp or not humanoid then return end
	workspace.Gravity = gravity
	local dir = humanoid.MoveDirection
	if dir.Magnitude > 0 then hrp.CFrame = hrp.CFrame + (dir * (cframeSpeed * 0.08)) end
end)

-- ESP SYSTEM
local function createHighlight(obj, color)
	if espHighlights[obj] then return espHighlights[obj] end
	local h = Instance.new("Highlight")
	h.Adornee = obj
	h.FillColor = color
	h.OutlineColor = Color3.new(0,0,0)
	h.FillTransparency = 0.5
	h.Parent = workspace
	espHighlights[obj] = h
	return h
end

local function updateESP()
	for _, survivor in ipairs(workspace:FindFirstChild("Survivors") or {}) do
		local hrp = survivor:FindFirstChild("HumanoidRootPart")
		if hrp then createHighlight(survivor, Color3.fromRGB(0,0,255)) end
	end
	for _, killer in ipairs(workspace:FindFirstChild("Killers") or {}) do
		local hrp = killer:FindFirstChild("HumanoidRootPart")
		if hrp then createHighlight(killer, Color3.fromRGB(255,0,0)) end
	end
	for _, gen in ipairs(workspace:FindFirstChild("Generators") or {}) do
		local repaired = gen:GetAttribute("Repaired")
		local color = repaired and Color3.fromRGB(0,100,0) or Color3.fromRGB(255,255,0)
		createHighlight(gen, color)
	end
end
RunService.Heartbeat:Connect(function() if espEnabled then updateESP() end end)

-- AUTO BLOCK
local blockRange = 18
local facingDot = -0.3
local function isFacing(localHRP, targetHRP)
	local dir = (targetHRP.Position - localHRP.Position).Unit
	return targetHRP.CFrame.LookVector:Dot(dir) > facingDot
end

RunService.Heartbeat:Connect(function()
	if autoBlockEnabled and LocalPlayer.Character then
		local hrp = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
		if hrp then
			for _, killer in ipairs(workspace:FindFirstChild("Killers") or {}) do
				local khrp = killer:FindFirstChild("HumanoidRootPart")
				if khrp and (khrp.Position - hrp.Position).Magnitude <= blockRange and isFacing(hrp, khrp) then
					local hum = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
					if hum then hum:ChangeState(Enum.HumanoidStateType.Seated) end
				end
			end
		end
	end
end)

-- AUTO GENERATOR
RunService.Heartbeat:Connect(function()
	if autoGenEnabled then
		for _, gen in ipairs(workspace:FindFirstChild("Generators") or {}) do
			local repaired = gen:GetAttribute("Repaired")
			if not repaired then
				local progress = gen:GetAttribute("Progress") or 0
				gen:SetAttribute("Progress", math.min(progress + 0.01 * autoGenSpeed, 100))
				if progress + 0.01 * autoGenSpeed >= 100 then
					gen:SetAttribute("Repaired", true)
				end
			end
		end
	end
end)
